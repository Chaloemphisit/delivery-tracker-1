(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{347:function(t,s,e){},350:function(t,s,e){t.exports=e.p+"img/nocanvas.d987a08.png"},351:function(t,s,e){t.exports=e.p+"img/nocanvas_failed.8db756e.png"},354:function(t,s,e){"use strict";var r=e(347);e.n(r).a},357:function(t,s,e){"use strict";e.r(s);var r=e(344),i=e.n(r),a={data:function(){return{carrier:{name:"",tel:""},track:"",info:{from:{name:"",time:""},to:{name:"",time:""},state:{id:"",text:""},progresses:[]},progresses:{},fold:!0,isProgressTooShort:!1,isLoading:!0,error:null}},beforeMount:function(){this.fetchData()},watch:{$route:function(){this.fetchData()},fold:function(){this.progresses=this.fold&&!this.isProgressTooShort?this.getProgressesByDate(this.info.progresses.slice(this.info.progresses.length-3)):this.getProgressesByDate(this.info.progresses)}},methods:{beautifyDate:function(t){return t.replace(/\-/g,".")},getTime:function(t){var s="";try{s=new Date(t).toLocaleString("ko-KR",{hour:"numeric",minute:"numeric"})}catch(t){s="알 수 없는 시간"}return s},formatNumber:e(355).a,fetchData:function(){var t=this,s=void 0,e=void 0;try{var r=/#!?\/(\w+.\w+)\/(\d+)/.exec(this.$route.hash),a=i()(r,3);s=a[1],e=a[2]}catch(t){return void this.goGuide()}this.isLoading=!0,this.error=null,this.$axios.get("/carriers/"+s+"/tracks/"+e).then(function(s){return t.carrier=s.data.carrier,t.track=e,t.info=s.data,s.data.progresses}).then(function(s){t.isProgressTooShort=s.length<=3,t.progresses=t.getProgressesByDate(t.isProgressTooShort?s:s.slice(s.length-3)),t.isLoading=!1}).catch(function(s){t.error={statusCode:s.response.status,message:s.response.data.message?s.response.data.message:"알 수 없는 에러입니다!"},t.isLoading=!1})},getProgressesByDate:function(t){var s={};return t.slice().sort(function(t,s){return t.time>s.time?-1:t.time<s.time?1:0}).forEach(function(t){var e=t.time.substr(0,10);e in s||(s[e]=[]),s[e].push(t)}),s},goGuide:function(){alert("가이드로 이동합니다."),this.$router.replace("/guide")}}},n=(e(354),e(21)),o=Object(n.a)(a,function(){var t=this,s=t.$createElement,r=t._self._c||s;return r("div",{attrs:{id:"tracker"}},[r("b-loading",{attrs:{active:t.isLoading},on:{"update:active":function(s){t.isLoading=s}}}),t._v(" "),r("header",{staticClass:"column tracking-header"},[t._m(0),t._v(" "),r("div",{staticClass:"tracking-status"},[null===t.error?r("h1",{staticClass:"has-text-centered"},[t._v("\n        "+t._s(t.info.state.text)+"\n      ")]):r("h1",{staticClass:"has-text-centered"},[t._v("추적실패")])]),t._v(" "),r("div",{staticClass:"tracking-illustration has-text-centered"},[null===t.error?r("img",{attrs:{src:e(350),alt:"No Canvas"}}):r("img",{attrs:{src:e(351),alt:"No Canvas Failed"}})]),t._v(" "),null!==t.error?r("b-message",{attrs:{type:"is-danger"}},[t._v("\n      "+t._s(t.error.message)+"\n    ")]):t._e()],1),t._v(" "),null===t.error?r("div",{staticClass:"tracking-detail"},[r("section",{staticClass:"tracking-progresses"},[r("transition-group",{attrs:{name:"fold"}},t._l(t.progresses,function(s,e){return r("div",{key:e,staticClass:"tracking-progress-entry"},[r("time",[t._v(t._s(t.beautifyDate(e)))]),t._v(" "),r("ul",t._l(s,function(s){return r("li",{key:s.id},[r("div",{staticClass:"loc"},[r("p",[t._v(t._s(s.location.name))]),t._v(" "),r("p",[t._v(t._s(t.getTime(s.time)))])]),t._v(" "),r("div",{staticClass:"desc"},[r("p",[t._v(t._s(s.status.text))]),t._v(" "),r("p",[t._v(t._s(s.description))])])])}))])})),t._v(" "),r("transition-group",{directives:[{name:"show",rawName:"v-show",value:!t.isProgressTooShort,expression:"!isProgressTooShort"}],attrs:{name:"fold"}},[r("a",{key:"test1",staticClass:"fold-button has-text-centered",on:{click:function(s){t.fold=!t.fold}}},[t.fold?r("div",[t._v("더보기 "),r("i",{staticClass:"fas fa-angle-down"})]):r("div",[t._v("간략히 보기 "),r("i",{staticClass:"fas fa-angle-up"})])])]),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.isProgressTooShort,expression:"isProgressTooShort"}],staticClass:"fold-button"})],1),t._v(" "),r("section",{staticClass:"tracking-info"},[t._m(1),t._v(" "),r("ul",[t.info.to.name?r("li",[r("h5",[t._v("받는 사람")]),t._v(" "),r("p",[t._v(t._s(t.info.to.name))])]):t._e(),t._v(" "),r("li",[r("h5",[t._v("택배사")]),t._v(" "),r("p",[t._v(t._s(t.carrier.name)+" ("+t._s(t.formatNumber(t.carrier.tel,"International"))+")")])]),t._v(" "),r("li",[r("h5",[t._v("송장번호")]),t._v(" "),r("p",[t._v(t._s(t.track))])]),t._v(" "),t.info.from.name?r("li",[r("h5",[t._v("보낸 사람")]),t._v(" "),r("p",[t._v(t._s(t.info.from.name))])]):t._e()])])]):t._e(),t._v(" "),t._m(2)],1)},[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tracking-title"},[s("h1",{staticClass:"has-text-centered"},[this._v("배송조회")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tracking-info-title"},[s("h2",{staticClass:"has-text-centered"},[this._v("기본정보")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticStyle:{"margin-top":"20px",color:"#585858","font-size":"0.8125rem"}},[s("a",{staticClass:"github-button",attrs:{href:"https://github.com/shlee322/delivery-tracker","data-icon":"octicon-star","data-show-count":"true","aria-label":"Star shlee322/delivery-tracker on GitHub"}},[this._v("Star")]),this._v("\n    Copyright (C) "),s("a",{attrs:{href:"https://tracker.delivery"}},[this._v("https://tracker.delivery")]),this._v(" "),s("script",{attrs:{async:"",defer:"",src:"https://buttons.github.io/buttons.js"}})])}],!1,null,"f0da715c",null);o.options.__file="index.vue";s.default=o.exports}}]);